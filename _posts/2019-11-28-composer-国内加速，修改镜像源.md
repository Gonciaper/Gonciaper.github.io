---
permalink: /posts/new7
display: normal
title: Composer 国内加速，修改镜像源
tags: php
date: '2017-11-22 20:54:00 +08:00'
comment: true
layout: post
component: php
---
### 为什么慢

由于默认情况下执行 composer 各种命令是去国外的 composer 官方镜像源获取需要安装的具体软件信息，所以在不使用代理、不翻墙的情况下，从国内访问国外服务器的速度相对比较慢

### 如何修改镜像源

可以使用阿里巴巴提供的 Composer 全量镜像 [https://mirrors.aliyun.com/composer/](https://mirrors.aliyun.com/composer/)

#### a). 配置只在当前项目生效

```
composer config repo.packagist composer https://mirrors.aliyun.com/composer/

# 取消当前项目配置
composer config --unset repos.packagist

```

#### b). 配置全局生效

```
composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/

# 取消全局配置
composer config -g --unset repos.packagist

```

#### c). 使用第三方软件快速修改、切换 composer 镜像源

[crm](https://github.com/slince/composer-registry-manager "crm") composer registry manager

##### 安装 crm

```
composer global require slince/composer-registry-manager

```

##### 列出可用的所有镜像源，前面带 * 代表当前使用的镜像

```
composer repo:ls

-- --------------- ------------------------------------------------
     composer        https://packagist.org
     phpcomposer     https://packagist.phpcomposer.com
     aliyun          https://mirrors.aliyun.com/composer
     tencent         https://mirrors.cloud.tencent.com/composer
     huawei          https://mirrors.huaweicloud.com/repository/php
     laravel-china   https://packagist.laravel-china.org
     cnpkg           https://php.cnpkg.org
     sjtug           https://packagist.mirrors.sjtug.sjtu.edu.cn
-- --------------- ------------------------------------------------

```

##### 使用 aliyun 镜像源

```
composer repo:use aliyun

# 执行成功之后会输出类似以下信息
[OK] Use the repository [aliyun] success

```

##### 再次执行 composer repo:ls 命令，看到前面带 * 的就是当前使用的镜像

```
composer repo:ls

# 可以看到 aliyun 前面有一个 * 号，代表当前使用的是 aliyun 的源
--- --------------- ------------------------------------------------
      composer        https://packagist.org
      phpcomposer     https://packagist.phpcomposer.com
  *   aliyun          https://mirrors.aliyun.com/composer
      tencent         https://mirrors.cloud.tencent.com/composer
      huawei          https://mirrors.huaweicloud.com/repository/php
      laravel-china   https://packagist.laravel-china.org
      cnpkg           https://php.cnpkg.org
      sjtug           https://packagist.mirrors.sjtug.sjtu.edu.cn
--- --------------- ------------------------------------------------

```

